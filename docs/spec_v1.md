# Gentask プロジェクト詳細仕様書

**〜 18.0sp モデル完全準拠型・M365 & GenAI 統合連載管理システム 〜**

## 1. 導入：なぜ Gentask が必要なのか（現状の課題）

週刊連載という過酷な環境において、作家を挫折させる最大の要因は「作業の遅れ」ではなく、**「管理コストによる精神的摩耗」**です。

### 従来の管理手法の限界

| 課題 | 内容 | 原因 |
| --- | --- | --- |
| **帳簿の形骸化** | Plannerを更新するのが面倒になり、実態と乖離する。 | 入力作業そのものが「非生産的」なタスクだから。 |
| **企画の枯渇** | 目の前の「製造」に追われ、次週の「企画」が漏れる。 | スケジュールが「単一話数」の視点しかないから。 |
| **意志力の浪費** | 「次に何をすべきか」を毎回考える必要がある。 | 作業が「0.5sp（30分）」単位まで具体化されていない。 |
| **柔軟性の欠如** | 予定が崩れた瞬間、全体像が見えなくなりパニックになる。 | リスケジュールに膨大な時間がかかるから。 |

**結論：** 「人間がシステムに合わせる」のではなく、**「人間が自由に動いた結果を、AIが解釈してシステムを合わせる」**仕組み（Gentask）が不可欠。

---

## 2. コア・モデル：18.0sp / 36-Block ライフサイクル

Gentask は、1話を **18.0sp（18時間）** と定義し、それを **36個の 0.5sp（30分）ブロック** に分解して管理します。

### 工程分解マトリクス

| フェーズ | 工程 (Task) | sp数 | ブロック数 | 定義・完了条件 |
| --- | --- | --- | --- | --- |
| **企画 (P)** | プロット | 2.0 | 4 | 全セリフ・演出意図の言語化 |
|  | ラフネーム | 0.5 | 1 | コマ割りと視線誘導の確定 |
|  | フルネーム | 0.5 | 1 | 表情・詳細ネームの確定 |
| **製造 (C/T)** | プリレイアウト | 2.0 | 4 | 3D配置前の「設計図」切り貼り |
|  | 3Dモデル制作 | 3.0 | 6 | ポージング・レンダリング完了 |
|  | レイアウト | 3.0 | 6 | カメラ決定・背景合成完了 |
| **仕上げ (C)** | エディット | 2.5 | 5 | 画像加筆・エフェクト処理 |
|  | 投稿 | 0.5 | 1 | **日曜21:00 厳守** |
| **調整 (---)** | 予備バッファ | 4.0 | 8 | クオリティアップ・遅延吸収 |

---

## 3. 運用ロジック：並行循環型カレンダー配置

Gentask は、今週の「製造」と来週の「企画」をカレンダー上で強制的に噛み合わせます。

### 週間オーバーラップ・スケジュール（2.0sp/日 制限版）

| 曜日 | 枠 (Time Slot) | 今週分（製造/仕上げ） | 来週分（企画） | 備考 |
| --- | --- | --- | --- | --- |
| **月** | 2.0h | プリレイ(4) | --- | 製造フェーズ開始 |
| **火** | 2.0h | 3D制作(4) | --- |  |
| **水** | 2.0h | 3D制作(2) | **プロット(2)** | **企画並走開始** |
| **木** | 2.0h | レイアウト(2) | **プロット(2)** |  |
| **金** | 2.0h | レイアウト(2) | **ネーム(2)** | 企画の完遂 |
| **土** | 3.0h | レイアウト(2) + 予備(2) | --- | 週末集中 |
| **日** | 5.0h | エディット(5) + 投稿(1) + 予備(4) | --- | 21:00 デッドライン |

---

## 4. システムアーキテクチャ：AI・API 統合設計

Gentask は M365 API を介して、Outlook と Planner を「脳（GenAI）」で繋ぎます。

### ① インテリジェント・シンクロナイザー（AI判断）

ユーザーが Outlook に残した断片的な情報を、AIが「進捗」として解釈します。

| Outlookでのユーザー行動 | GenAI の解釈・推論 | Planner への反映 (API) |
| --- | --- | --- |
| 予定の本文に「ok」と記入 | 「この 30分枠は完了した」 | 該当タスクを完了に。 |
| 予定を 30分後ろにずらした | 「作業時間がスライドした」 | Plannerの期限を自動修正。 |
| 「手が止まった。明日やる」 | 「未完了・要リスケ」 | 未完タスクを翌日の空き枠へ移動。 |
| 「神回。倍の時間かけた」 | 「リソース過剰・バッファ消費」 | 予備バッファタスクを相殺消化。 |

### ② 永続的 ID 紐付け（Open Extensions）

カレンダーの「予定」と Planner の「タスク」をメタデータで結合します。

* **Outlook Event Extension**: `{ "plannerTaskId": "xyz-123" }`
* **Planner Task Extension**: `{ "outlookEventId": "evt-789" }`
これにより、ユーザーがタイトルを書き換えても同期が破壊されません。

---

## 5. リカバリ（巻き戻し）機能：安全装置の設計

AIの誤判定や操作ミスを想定し、システムは常に「一つ前の状態」へ戻る手段を提供します。

### 状態スナップショット・エンジン

1. **記録**: 全ての API 操作（PATCH/POST）の直前に、現在の `Task` と `Event` の状態を JSON 形式でログ保存。
2. **トリガー**: Outlook 予定に「`undo`」「`戻して`」と記入、あるいは Planner のチェックを外す。
3. **復元**: ログから一つ前のスナップショットを読み込み、Planner と Outlook を同時に書き戻す。

---

## 6. 日曜 21時の自動スライド（昇格）プロセス

連載を永続化させるための「儀式」を自動化します。

1. **判定**: 日曜 21時時点で「投稿」タスクが完了しているかを確認。
2. **アーカイブ**: 今週分（製造）の全タスクを「完了バケット」へ移動。
3. **昇格（スライド）**:
* 来週分バケットの「企画（プロット・ネーム）」タスクの `Status` を「製造」に書き換え。
* バケットを「今週分」に移動。
* 翌月曜〜金の Outlook カレンダーに、これらのタスクを自動配置。


4. **新規予約**: 空いた「来週分」バケットに、次々回話数のプロットタスク 4 ブロックを生成。

---

## 7. Gentask の設計思想（まとめ）

> **「管理を意識させない管理」**
> 作家は Outlook という「自由なキャンバス」で作業時間を動かし、メモを書く。
> Gentask（AI）は、その自由な振る舞いの背後にある「18.0spモデルとの差分」を計算し、Planner という「厳格な帳簿」を無言で更新し続ける。
